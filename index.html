<!DOCTYPE html>
<html>
<head>
<title>SYEDZ AI-PACS</title>
<style>
body{font-family:Arial;background:#eef3f7;margin:0}
.header{background:#2f6fd6;color:white;padding:12px;font-size:22px}
.toolbar{background:#d9e1ea;padding:8px}
table{width:100%;border-collapse:collapse;background:white;margin-top:10px}
th{background:#2f6fd6;color:white;padding:8px}
td{border:1px solid #ddd;padding:8px;text-align:center}
button{padding:6px 10px}
#result{margin:10px;padding:12px;background:#e9f3ff;font-size:16px}
.ai-btn{background:#28a745;color:white;border:none}
</style>
</head>

<body>

<div class="header">SYEDZ AI-PACS</div>

<div class="toolbar">
<input type="file" id="xrayFile">
<button onclick="analyze()">Analyze X-ray</button>
</div>

<table>
<tr>
<th>Patient</th>
<th>Modality</th>
<th>Study</th>
<th>AI</th>
</tr>
<tr>
<td>PT-001</td>
<td>XRAY</td>
<td>Chest PA</td>
<td><button class="ai-btn" onclick="analyze()">Generate AI</button></td>
</tr>
</table>

<div id="result">Upload image and click Analyze.</div>

<script>
async function analyze(){

const file=document.getElementById("xrayFile").files[0];
if(!file){
alert("Please select X-ray image");
return;
}

const formData = new FormData();
formData.append("image", file);

const res = await fetch(
  "https://syedasrar-syedz-ai-backend.hf.space/predict",
  {
    method: "POST",
    body: formData
  }
);

const data = await res.json();

let output = "<b>AI Pathology Probabilities:</b><br><br>";
for (let key in data) {
  output += `${key}: ${(data[key] * 100).toFixed(1)}%<br>`;
}

resultBox.innerHTML = output;
}

if(!output.includes("%")){
output="AI returned no valid prediction.";
}

document.getElementById("result").innerHTML=output;

}
catch(err){
document.getElementById("result").innerHTML="AI backend error. Check if backend Space is running.";
}

}
</script>

</body>
</html>
